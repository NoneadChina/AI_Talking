# AI Talking


AI Talking は、チャット、ディスカッション、ディベートなどの複数モードをサポートし、デスクトップアプリケーションとWebアプリケーションの両方のデプロイ方法を提供する強力なAI対話システムです。

## プロジェクト構造

プロジェクトは3つの主要部分に分かれています：

1. **AI_Talking** - MVCアーキテクチャを採用した新しいデスクトップアプリケーションで、コードはモジュール化され、チャット、ディスカッション、ディベート、バッチ処理などの複数モードをサポート
   - PyQt5フレームワークでGUIを開発
   - OpenAI、DeepSeek、Ollama APIをサポート
   - モジュール設計、コード構造が明確
   - 複数回の対話と履歴管理をサポート

2. **AI_Talking_Web** - フロントエンドとバックエンドが分離されたWebアプリケーションで、オンライン使用をサポート
   - フロントエンドはTypeScriptで開発
   - バックエンドはFastAPIフレームワークを使用
   - リアルタイムAI対話とディスカッションをサポート
   - 完全なAPIドキュメントを提供

3. **Chat2Chat** - 単一ファイルアーキテクチャの旧バージョンデスクトップアプリケーションで、機能が完全で、迅速なデプロイと使用に適しています
   - 軽量設計で、使いやすい
   - 基本的なAI対話機能をサポート
   - シンプルなシナリオに適しています

## 機能特徴

### コア機能

- 💬 **チャットモード**：AIと1対1のチャットが可能で、複数のAIモデルとAPIをサポート
- 🔄 **ディスカッションモード**：2つのAIが指定されたトピックについて深く議論
- ⚖️ **ディベートモード**：2つのAIが指定されたトピックについて構造化されたディベート
- 📝 **履歴管理**：チャット履歴の表示、編集、コピー、削除、管理が可能で、バッチ操作をサポート
- 🔧 **API設定**：複数のAPIキーとシステムプロンプトを統一管理
- 📊 **バッチ処理**：複数のディスカッショントピックを一括処理し、効率を向上
- 📋 **About Us**：アプリケーションバージョンと開発チーム情報を表示
- 🌐 **国際化サポート**：複数言語のインターフェースをサポートし、自由に切り替え可能

### 技術特徴

- 🌟 **現代的なアーキテクチャ**：デスクトップアプリケーションはMVCアーキテクチャを採用、Webアプリケーションはフロントエンドとバックエンドが分離
- 🔌 **複数APIサポート**：OpenAI、DeepSeek、Ollama APIをサポート
- 🎨 **使いやすいインターフェース**：直感的で使いやすいグラフィカルユーザーインターフェース、複数テーマをサポート
- 📱 **クロスプラットフォーム**：Windows、macOS、Linuxをサポート
- 🔒 **安全で信頼性が高い**：完璧なエラー処理とリソース管理
- 📈 **高性能**：最適化されたAPI呼び出しとリソース管理
- 🧪 **包括的なテスト**：単体テスト、統合テスト、UIテストを含む

## インストールと使用方法

### 1. AI_Talking（新しいデスクトップアプリケーション）

#### 依存関係のインストール

```bash
cd AI_Talking
pip install -r ../requirements.txt
```

#### アプリケーションの実行

```bash
cd AI_Talking
python src/main.py
```

#### クイックスタート

Windowsユーザーは、`run_app.bat`スクリプトを直接実行してアプリケーションを起動できます。

### 2. AI_Talking_Web（Webアプリケーション）

#### 完全なサービスの起動

```bash
cd AI_Talking_Web
python start_server.py
```

#### バックエンドサービスの単独起動

```bash
cd AI_Talking_Web
python backend/main.py
```

#### フロントエンド開発モード

```bash
cd AI_Talking_Web
npm install
npm run dev
```

#### フロントエンドのビルド

```bash
cd AI_Talking_Web
npm run build
```

### 3. Chat2Chat（旧バージョンデスクトップアプリケーション）

#### アプリケーションの実行

```bash
cd Chat2Chat
python chat_gui.py
```

## APIキーの設定

### デスクトップアプリケーション

1. アプリケーションを起動した後、「API設定」タブをクリック
2. 必要なAPIキーとシステムプロンプトを設定
3. 「設定を保存」ボタンをクリック

### Webアプリケーション

1. Webアプリケーションにアクセス
2. 「設定」タブをクリック
3. 必要なAPIキーとシステムプロンプトを設定
4. 「設定を保存」ボタンをクリック

## 環境変数の設定

`.env`ファイルを直接編集してAPIキーを設定することもできます。プロジェクトのルートディレクトリには`.env使用说明.md`ファイルが提供されており、各設定項目の使用方法が詳細に説明されています。

```
# Ollama API設定
OLLAMA_BASE_URL=http://localhost:11434

# OpenAI API設定
OPENAI_API_KEY=your_openai_api_key

# DeepSeek API設定
DEEPSEEK_API_KEY=your_deepseek_api_key

# チャットシステムプロンプト設定
CHAT_SYSTEM_PROMPT=

# ディスカッションシステムプロンプト設定
DISCUSSION_SYSTEM_PROMPT=
DISCUSSION_AI1_SYSTEM_PROMPT=
DISCUSSION_AI2_SYSTEM_PROMPT=

# ディベートシステムプロンプト設定
DEBATE_SYSTEM_PROMPT=
DEBATE_AI1_PROMPT=
DEBATE_AI2_PROMPT=

# エキスパートAI3システムプロンプト
EXPERT_AI3_SYSTEM_PROMPT=

# ジャッジAI3システムプロンプト
JUDGE_AI3_SYSTEM_PROMPT=
```

## 使用ガイド

### チャットモード

1. 「チャット」タブを選択
2. AIモデルとAPIタイプを選択
3. 質問またはメッセージを入力
4. 「送信」ボタンをクリック
5. AIの応答を待つ

### ディスカッションモード

1. 「ディスカッション」タブを選択
2. ディスカッショントピックを入力
3. 2つのAIモデルとAPIタイプを選択
4. ディスカッションのラウンド数と温度パラメータを設定
5. 「ディスカッション開始」ボタンをクリック
6. ディスカッションのプロセスと結果を表示

### ディベートモード

1. 「ディベート」タブを選択
2. ディベートトピックを入力
3. 2つのAIモデルとAPIタイプを選択（賛成側と反対側）
4. ディベートのラウンド数と温度パラメータを設定
5. 「ディベート開始」ボタンをクリック
6. ディベートのプロセスと結果を表示

### バッチ処理

1. 「バッチ処理」タブを選択
2. 複数のディスカッショントピックを入力（1行に1つ）
3. AIモデルとAPIタイプを選択
4. ディスカッションパラメータを設定
5. 「処理開始」ボタンをクリック
6. 処理結果を表示

### 履歴管理

1. 「履歴管理」タブを選択
2. 履歴記録リストを参照
3. 記録をクリックして詳細を表示
4. 選択した記録を削除したり、すべての記録をクリアしたりできます

### API設定

1. 「API設定」タブを選択
2. APIキーとシステムプロンプトを入力
3. 「設定を保存」ボタンをクリック

### About Us

1. 「About Us」タブを選択
2. アプリケーションバージョンと開発チーム情報を表示

## 技術スタック

### デスクトップアプリケーション (AI_Talking)

| 技術 | 用途 |
|------|------|
| Python | 主要プログラミング言語 |
| PyQt5 | GUIフレームワーク、デスクトップインターフェース構築 |
| FastAPI | バックエンドAPIサービス |
| requests | HTTPリクエスト処理 |
| python-dotenv | 環境変数管理 |
| markdown | Markdownレンダリング |
| pytest | テストフレームワーク |
| Black | コードフォーマット |

### Webアプリケーション (AI_Talking_Web)

| 技術 | 用途 |
|------|------|
| TypeScript | フロントエンド開発言語 |
| FastAPI | バックエンドフレームワーク |
| Axios | HTTPリクエストライブラリ |
| Marked | Markdownレンダリング |
| live-server | 開発サーバー |
| Swagger UI | APIドキュメント生成 |

## APIドキュメント

Webアプリケーションは完全なAPIドキュメントを提供しており、以下の方法でアクセスできます：

- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## パフォーマンス最適化

### API呼び出しの最適化

- 🔄 **自動リトライ**：API呼び出しに失敗した場合に自動的にリトライし、信頼性を向上
- ⚡ **レート制限**：エラー率に基づいてリクエスト頻度を動的に調整
- 📥 **バッチリクエスト**：複数のAPIリクエストを結合し、ネットワークオーバーヘッドを削減

### リソース管理

- 🧹 **リソースクリーンアップ**：使用されなくなったリソースをタイムリーにクリーンアップ
- 🧵 **スレッドプール**：スレッドプールを使用してスレッドを管理し、スレッド数が多くなるのを回避
- 📦 **コンテキストマネージャ**：安全なリソース管理

## セキュリティ設計

### APIセキュリティ

- 🔑 **安全なストレージ**：APIキーを暗号化して保存
- ✅ **入力検証**：すべての入力を厳密に検証
- 🛡️ **CORS設定**：合理的なクロスドメインアクセス設定
- 🚦 **リクエストスロットリング**：APIの濫用を防止

### データセキュリティ

- 🔒 **データ暗号化**：機密データを暗号化して保存
- 📋 **アクセス制御**：厳格なアクセス制御
- 📝 **安全なロギング**：ログに機密情報を含まない

## 監視と保守

### ログシステム

- 📊 **レベル別ロギング**：DEBUG、INFO、WARNING、ERROR、CRITICALの5つのレベルをサポート
- 📝 **詳細な形式**：時間、レベル、モジュール名、メッセージ内容を含む
- 💾 **ファイルストレージ**：ログをファイルに保存し、分析とデバッグを容易に
- 📦 **ログローテーション**：ログファイルのサイズを自動的に管理し、ディスク容量の過剰使用を防止

### エラー監視

- 📈 **エラー統計**：エラーの種類と数を統計
- ⚠️ **エラーアラート**：エラー率がしきい値を超えた場合に自動的にアラート
- 🔍 **エラー分析**：詳細なエラー情報を提供し、問題の特定を容易に

## 開発ガイド

### コードスタイル

- Python: Blackを使用してコードをフォーマットし、PEP8仕様に準拠
- TypeScript: TypeScriptコンパイラを使用して型チェックを行い、TypeScriptのベストプラクティスに準拠
- pre-commitフックを使用してコードスタイルを自動的にチェック

### テスト

- 単体テスト：個々のモジュールの機能をテストし、`tests`ディレクトリに配置
- 統合テスト：モジュール間の相互作用をテストし、システム全体の機能が正常であることを確認
- UIテスト：ユーザーインターフェースの相互作用と応答をテスト

### ビルド

#### デスクトップアプリケーションのパッケージ化

```bash
cd AI_Talking
python -m PyInstaller --onefile --windowed --icon=../resources/icon.ico src/main.py
```

#### Webアプリケーションのビルド

```bash
cd AI_Talking_Web
npm run build
```

### アーキテクチャ設計

プロジェクトは階層型アーキテクチャ設計を採用しています。詳細なアーキテクチャ情報については、`ARCHITECTURE.md`ファイルを参照してください。

## バージョン説明

| バージョン | 説明 |
|------|------|
| v1.0 | 初期バージョンで、基本的なAIディスカッション機能をサポート |
| v2.0 | MVCアーキテクチャにリファクタリングし、ディベートとチャットモードを追加 |
| v3.0 | Webアプリケーションを追加し、フロントエンドとバックエンドの分離をサポート |
| v4.0 | パフォーマンスを最適化し、エラー監視とリソース管理を追加 |
| v5.0 | テストケースを充実させ、バッチ処理機能を追加し、ユーザーインターフェースを最適化 |

## 将来の計画

1. 🌐 **多言語サポート**：複数言語のインターフェースをサポート
2. ☁️ **クラウド同期**：チャット履歴のクラウド同期を実現し、複数デバイスからのアクセスをサポート
3. 🔌 **プラグインシステム**：プラグイン拡張をサポートし、機能を強化
4. 📱 **モバイル最適化**：より良いモバイル体験を提供
5. 🎙️ **音声対話**：リアルタイム音声対話をサポート
6. 🎨 **テーマカスタマイズ**：カスタムテーマとスタイルをサポート
7. 📊 **データ分析**：対話データの分析と可視化
8. 🎯 **AI微調整**：モデルの微調整をサポートし、対話品質を向上

## 貢献

IssueとPull Requestの提出を歓迎します！貢献ガイドラインは以下の通りです：

1. このリポジトリをFork
2. 機能ブランチを作成 (`git checkout -b feature/AmazingFeature`)
3. 変更をコミット (`git commit -m 'Add some AmazingFeature'`)
4. ブランチにプッシュ (`git push origin feature/AmazingFeature`)
5. Pull Requestを開く

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細については、`LICENSE`ファイルを参照してください。

## お問い合わせ

- 開発チーム：NONEAD Corporation
- 連絡先メール：support@nonead.com
- プロジェクトアドレス：[https://github.com/NONEAD/AI_Talking](https://github.com/NoneadChina/AI_Talking)

## 謝辞

このプロジェクトに貢献したすべての開発者とユーザーに感謝します！

## 関連ドキュメント

- [アーキテクチャ設計ドキュメント](ARCHITECTURE.md)
- [変更ログ](CHANGELOG.md)
- [環境変数使用説明](.env使用说明.md)
- [コードレビューレポート](code_review_report.md)